<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: head('Đơn hàng của tôi')"></head>
<body>
<div th:replace="fragments/navbar :: navbar"></div>
<div class="container mt-5">
    <h2>Đơn hàng của tôi</h2>

    <div th:if="${orders == null || orders.isEmpty()}" class="alert alert-info">Bạn chưa có đơn hàng nào.</div>

    <div th:if="${orders != null}">
        <table class="table">
            <thead>
            <tr><th>#</th><th>Ngày</th><th>Tổng</th><th>Trạng thái</th><th></th><th></th></tr>
            </thead>
            <tbody>
            <tr th:each="o : ${orders}">
                <td th:text="${o.id}"></td>
                <td th:text="${#temporals.format(o.createdAt,'dd/MM/yyyy')}"></td>
                <td th:text="${#numbers.formatDecimal(o.total,0,'COMMA',0,'POINT')} + ' VND'"></td>
                <td th:text="${o.status}"></td>
                <td><a th:href="@{/orders/{id}(id=${o.id})}" class="btn btn-sm btn-primary">Xem</a></td>
                <td>
                    <form th:if="${o.status == 'NEW' or o.status == 'PROCESSING'}"
                          th:action="@{/orders/{id}/cancel(id=${o.id})}" method="post">
                        <button class="btn btn-sm btn-outline-danger">Hủy</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
